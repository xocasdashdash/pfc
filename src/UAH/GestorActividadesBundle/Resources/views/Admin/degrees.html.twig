{% trans_default_domain "gat_admin" %}
{% extends "::backend.html.twig" %}
{% block javascripts %}
    {{parent()}}
    {% javascripts '@UAHGestorActividadesBundle/Resources/public/js/backend/admin/degrees.js' filter='?uglifyjs2'%}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}
{% block stylesheets %}
    {{parent()}}
    {% stylesheets '@UAHGestorActividadesBundle/Resources/public/css/backend/admin/*.less'
    '@UAHGestorActividadesBundle/Resources/public/css/backend/categories/*.less'%}
    <link href="{{ asset_url }}" rel="stylesheet" type="text/css" />
    {% endstylesheets %}
{%endblock %}
{% block acciones_datos %}
    <div class="row acciones_datos hidden-print">
        <div class="flex-container">
            <div class="flex-item">
                {# <div class="dropdown"> #}
                {# <button type="button" class="btn btn-default" title="Muestra todas las actividades" id="btn_show_all_activities" >
                    <div class="dropdown"> #}
                <li class="dropdown">
                    <button id="dropdownMenu1" href="#" data-toggle="dropdown" class="btn btn-default">
                        {{'Filtra las titulaciones'|trans}}
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="dropdownMenu1">
                        <li role="presentation">
                            <a role="menuitem" tabindex="-1" href="{{path('uah_gestoractividades_admin_degrees', {filter: 'CIENCIAS'})}}">{{'Ciencias'|trans}}</a>
                        </li>
                        <li role="presentation">
                            <a role="menuitem" tabindex="-1" href="{{path('uah_gestoractividades_admin_degrees', {filter: 'SALUD'})}}">{{'Ciencias de la Salud'|trans}}</a>
                        </li>
                        <li role="presentation">
                            <a role="menuitem" tabindex="-1" href="{{path('uah_gestoractividades_admin_degrees', {filter: 'CCSSYJJ'})}}">{{'Ciencias Sociales y Jurídicas'|trans}}</a>
                        </li>
                        <li role="presentation">
                            <a role="menuitem" tabindex="-1" href="{{path('uah_gestoractividades_admin_degrees', {filter: 'HUMANIDADES'})}}">{{'Humanidades'|trans}}</a>
                        </li>
                        <li role="presentation">
                            <a role="menuitem" tabindex="-1" href="{{path('uah_gestoractividades_admin_degrees', {filter: 'INGYARQ'})}}">{{'Ingeniería y Arquitectura'|trans}}</a>
                        </li>
                        <li role="presentation" class="divider"></li>
                        <li role="presentation">
                            <a role="menuitem" tabindex="-1" href="{{path('uah_gestoractividades_admin_degrees', {filter: 'ALL'})}}">{{'Todos (Incluido eliminados)'|trans}}</a>
                        </li>
                    </ul>
                </li>
            </div>

            <div class="flex-item">
                <button class="btn btn-default" id="btn_create_new_degree" title="{{'Mostrar el formulario para dar de alta nuevas titulaciones'|trans}}" data-toggle="modal" data-target="#modal-create-degree">{{'Dar de alta nueva titulacion'|trans}}</button>
            </div>
        </div>

    </div>

{% endblock %}
{% block title %}
    {{'Panel de administración de titulaciones'|trans}}
{% endblock %}
{% block content %}
    <div class="row top-buffer table-style">
        <table class="table table-bordered tbl_enrolled">
            <thead>
                <tr>
                    <th class="visible-md-up">#</th>
                    <th class="nombre-grado">{{'Nombre'|trans}}</th>
                    <th class="visible-sm-up">{{'Área'|trans}}</th>
                    <th>{{'Código Académico'|trans}}</th>
                    <th class="hidden-print">{{'Acción'}}</th>
                </tr>
            </thead>
            <tbody>
                {% for degree in degrees %}
                    <tr id="degree-{{degree.id}}" data-degree-type="{{degree.status.code }}">
                        <td class="visible-md-up index">{{loop.index}}</td>
                        <td class="degree-name">{{degree.name}}</td>
                        <td class="degree-knowledge-area visible-sm-up">{{degree.knowledgeArea}}</td>
                        <td class="degree-academic-code">{{degree.academicCode}}</td>
                        <td class="text-center">
                            <button class="btn btn-default update_degree" data-degree-id="{{degree.id}}" title="{{'Actualiza los datos de este plan de estudios'|trans}}">{{'Actualizar'|trans}}</button>
                            <button class="btn btn-default delete_degree" data-degree-id="{{degree.id}}" title="{{'Desactiva este plan de estudios y deja a los que están en él, en el mismo'|trans}}">{{'Eliminar'|trans}}</button>
                            {% if degree.status.code == 'STATUS_INACTIVE' %}
                                <button class="btn btn-default reactivate_degree" data-degree-id="{{degree.id}}" title="{{'Actualiza los datos y  reactiva este plan de estudios'|trans}}">{{'Reactivar'|trans}}</button>
                            {% endif %}
                        </td>
                    </tr>

                {% endfor %}

            </tbody>
        </table>
    </div>
    <div class="modal fade" id="modal-create-degree" role="dialog" data-keyboard="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form class="form-horizontal" id="form-create-degree">
                    <div class="modal-header">
                        <h4>{{'Crear una nueva titulación'|trans}}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="degree-name" class="col-sm-4 control-label">{{'Nombre Titulación:'|trans}}</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="degree-name" name="degree-name" placeholder="{{'Grado en ...'|trans}}">
                            </div>
                        </div>
                        <div class="form-group">

                            <label for="knowledge-area" class="col-sm-4 control-label">{{'Áreas de conocimiento:'|trans}}</label>
                            <div class="col-sm-8">
                                <select class="selectpicker" name="knowledge-area" title="{{'Area de conocimiento'|trans}}" id="knowledge-area" data-width="100%">
                                    {% set knowledge_areas = ['Artes y Humanidades','Ciencias', 'Ciencias de la Salud','Ciencias Sociales y Jurídicas','Ingeniería y Arquitectura'] %}
                                    {% for knowledge_area in knowledge_areas %}
                                        <option value="{{knowledge_area|trans}}">{{knowledge_area|trans}}</option>
                                    {% endfor %}
                                </select>
                            </div>

                        </div>
                        <div class="form-group">
                            <label for="academic-code" class="col-sm-4 control-label">{{'Código Académico'|trans}}</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="academic-code" name="academic-code" placeholder="G##">
                            </div>
                        </div>
                        <div class="form-group radio-div">
                            <label class="control-label col-sm-4">{{'¿Es un plan de estudio renovado?'|trans}}</label>
                            <label class="radio col-sm-7 col-sm-offset-5">
                                <input type="radio" name="type" value="STATUS_RENEWED">{{'Renovado'|trans}}
                            </label>
                            <label class="radio col-sm-7 col-sm-offset-5">
                                <input type="radio" name="type" value="STATUS_NON_RENEWED">{{'No renovado'|trans}}
                            </label>
                        </div>
                        <input type="hidden" name="degree-id" id="degree-id">
                    </div>
                    <div class="modal-footer">
                        <a class="btn btn-default" id="close_modal" data-dismiss="modal">{{'Cerrar'|trans}}</a>
                        <button class="btn btn-success" type="submit" id="btn_submit_degree">{{'Crear'|trans}}</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

{% endblock %}
